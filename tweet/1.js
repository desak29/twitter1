(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-56095-10','lonelytweets.com');ga('send','pageview');if(window.location!==window.top.location){top.location.href='http://lonelytweets.com/';}
window.onerror=function(message,file,line){if(message){ga('send','event','Error',message,file&&line?('['+ file+':'+ line+']'):'',true);}
return false;};!function(){var t,e,i,n=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e,i){t.addEventListener?t.addEventListener(e,i):t.attachEvent("on"+e,function(){i.call(t)})},o=function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},l=function(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")},h=function(t){for(var e=0,i=0;null!=t;e+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent);return{x:e,y:i}};i="position-sticky";var m;e=function(){function t(t){return this.update=n(this.update,this),this.stickyElements=t,this.init(),this}return t.prototype.init=function(){this.setup(),this.events()},t.prototype.setup=function(){for(var t=0;t<this.stickyElements.length;t++){{var e=this.stickyElements[t];this.stickyElements[t+1]}e.setZindex(t)}},t.prototype.events=function(){s(window,"scroll",this.update),s(window,"resize",this.update)},t.prototype.update=function(){for(var t=this.getScrollTop(),e=0;e<this.stickyElements.length;e++){var i=this.stickyElements[e],n=this.stickyElements[e+1];i.update(),n&&i.position+i.height===n.position||(i.stuck===!1&&t>=i.position&&t<=i.limit?i.stick():i.frozen!==!0&&t>=i.limit?i.freeze():i.frozen===!0&&t<=i.limit?i.stick():i.stuck===!0&&t<=i.position&&i.unstick())}},t.prototype.getScrollTop=function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},t}(),t=function(){function t(t){return this.element=t,this.dummyElement=null,this.position=null,this.limit=null,this.stuck=!1,this.frozen=!1,this.zIndex=0,this.init(),this}return t.prototype.init=function(){this.createDummyElement(),this.insertDummyElement(),this.getOffset(),this.getLimit()},t.prototype.update=function(){this.stuck&&(this.element.style.width=this.dummyElement.offsetWidth+"px"),this.stuck||this.getOffset(),this.getLimit(),this.frozen===!0&&this.freeze()},t.prototype.createDummyElement=function(){var t;return t=document.createElement("div"),this.height=this.element.offsetHeight,t.style.height="0px",this.dummyElement=t},t.prototype.insertDummyElement=function(){return this.element.parentNode.insertBefore(this.dummyElement,this.element.nextSibling)},t.prototype.getOffset=function(){return this.position=this.element.offsetTop},t.prototype.getLimit=function(){return this.limit=this.element.parentNode.offsetTop+this.element.parentNode.offsetHeight-this.element.offsetHeight},t.prototype.setZindex=function(t){return this.element.style.position="relative",this.zIndex=t+9e3},t.prototype.hideDummyElement=function(){return this.dummyElement.style.height="0px"},t.prototype.showDummyElement=function(){return this.dummyElement.style.height=this.height+"px"},t.prototype.stick=function(){this.stuck=!0,this.frozen=!1,this.showDummyElement(),this.element.style.position="fixed",this.element.style.top="0",this.element.style.left=h(this.element).x,this.element.style.width=this.dummyElement.offsetWidth+"px",this.element.style.zIndex=this.zIndex,o(this.element,i)},t.prototype.unstick=function(){this.stuck=!1,this.frozen=!1,this.hideDummyElement(),this.element.style.position="relative",this.element.style.top=null,this.element.style.left=null,this.element.style.width=null,this.element.style.zIndex=null,l(this.element,i)},t.prototype.freeze=function(){this.showDummyElement(),this.frozen=!0,this.element.style.position="absolute",this.element.style.top=this.limit+"px",this.element.style.left=h(this.element).x,this.element.style.width=this.dummyElement.offsetWidth+"px",this.element.style.zIndex=null},t}(),m=function(i){for(var n=[],s=0;s<i.length;s++){var o=i[s],l=new t(o);n.push(l)}new e(n)},window.PositionSticky=m,"undefined"!=typeof jQuery&&!function(t){t.fn.positionSticky=function(){if(0!==this.length){var t=[];return this.each(function(e,i){t.push(i)}),m(t),this}}}(jQuery)}();var Lonely=(function(){var Lonely={},$ul,$more,$moreLink,init,newTweets=[],title='Lonely Tweets :\'(',topID;Lonely.trackEvent=function(category,action,label){try{ga('send','event',category,action,label);}catch(e){}};Lonely.popup=function(e,url,w,h,name){w=w||600;h=h||310;var wl=window.screenX||0,ww=wl?$(window).width():screen.availWidth,wt=window.screenY||0,wh=wt?$(window).height():screen.availHeight,l=wl+(ww- w)/ 2,
t=wt+(wh- h)/ 2;
window.open(url||(e&&(e.target.href||e.currentTarget.href)),'lonelytweets'+(name||'window'),'resizable=yes,toolbar=no,scrollbars=yes,status=no,width='+ w+',height='+ h+',left='+ l+',top='+ t);if(e){e.preventDefault();}};function initTwitterShareButton(){$('.twitter-share-button').click(function(e){Lonely.popup(e,'https://twitter.com/intent/tweet?url='+
encodeURIComponent($(this).attr('data-url'))+'&text='+ encodeURIComponent($(this).attr('data-text'))+'&related='+ $(this).attr('data-related')+'&hashtags='+ $(this).attr('data-hashtags'));});}
function scrollToTop(){$('html,body').animate({scrollTop:0},Math.min(1200,$(document).scrollTop()/ 15 + 100));
}
function initMoreButton(){$moreLink.click(function(e){if(e){e.preventDefault();}
var newTotal=newTweets.length;if(newTotal){Lonely.trackEvent('More',newTotal.toString());}
scrollToTop();$more.height(0.01);$moreLink.hide();document.title=title;if(newTotal){topID=newTweets[0].id;renderTweets(newTweets);}
newTweets=[];var $li=$('li');for(var i=$li.length- 1;i>=100;i--){$li[i].remove();}});}
function initTopButton(){$('.top').click(function(e){if(e){e.preventDefault();}
scrollToTop();});}
function getTime(timestamp){var t=Math.round((new Date()).getTime()/ 1000) - parseInt(timestamp, 10);
if(t<0){t=0;}
if(t<60){return t+'s ago';}else if(t<10*60){var m=Math.floor(t/60),s=t- m*60;return m+'m'+(s===0?'':' '+ s+'s')+' ago';}else if(t<60*60){return(Math.floor(t/60))+'m ago';}else if(t<60*60*24){return(Math.floor(t/60/60))+'h ago';}
return(Math.floor(t/60/60/24))+'d ago';}
function tweetTimer(){setTimeout(tweetTimer,1000);$('.info .time').each(function(){var $this=$(this);$this.text(getTime($this.attr('data-timestamp')));});}
function initTweets(tweets){if(init){if(tweets[0].id!==topID){var o,i,tempNewTweets=[];for(i=0;i<tweets.length;i++){o=tweets[i];if(o.id===topID){break;}
tempNewTweets.push(o);}
for(i=tempNewTweets.length;i--;){newTweets.unshift(tempNewTweets[i]);}
topID=tweets[0].id;$more.height(60);var newTotal=newTweets.length;if(newTotal<10){document.title='('+ newTotal+') '+ title;$moreLink.html('View '+ newTotal+' new <span translate="no" class="notranslate">Lonely Tweet'+(newTotal===1?'':'s')+'</span> :\'(').show();}else{document.title=title;$moreLink.html('View new <span translate="no" class="notranslate">Lonely Tweets</span> :\'(').show();}}}else{init=true;topID=tweets[0].id;renderTweets(tweets);tweetTimer();$('.error,.loading').hide();$('.more,.top').show();}}
function loadTweetsError(e){Lonely.trackEvent('Error',e);if(!init){$('.error').removeClass('hidden').show();console.error(e);}}
function loadTweets(){$.ajax({url:'/data/',dataType:'json',crossDomain:false,cache:false,timeout:15000,success:function(data){if(data.tweets){initTweets(data.tweets);}else{loadTweetsError(data.error);}},error:function(e){loadTweetsError(e);}});setTimeout(loadTweets,15000);}
function loadBG($thisItem,bg){var bgFade='linear-gradient(rgba(0,0,0,0.6),rgba(0,0,0,0.3))';if(/MSIE /.test(navigator.userAgent)){$thisItem.prepend('<div class="ie-darken"></div>');$thisItem.css('background-image','url('+ bg+')');}else{$thisItem.attr('style','background-image: -webkit-'+ bgFade+', url('+ bg+'); '+'background-image: -moz-'+ bgFade+', url('+ bg+');'+'background-image: -o-'+ bgFade+', url('+ bg+');'+'background-image: '+ bgFade+', url('+ bg+');');}}
function renderTweets(data){var $item=$('<li><p class="text"></p><p class="info"></p></li>'),separator=' &nbsp;&middot;&nbsp; ',$thisItem,o,i,bg,newItems=[];for(i=data.length;i--;){o=data[i];$thisItem=$item.clone();$thisItem.find('.text').text(o.status);$thisItem.find('.info').html('<span dir="ltr">'+ o.name+'</span>'+
(o.location?(separator+'<em>'+ o.location+'</em>'):'')+
separator+'<span class="time" data-timestamp='+ o.time+'>'+ getTime(o.time)+'</span>');$thisItem.prependTo($ul);newItems.push({item:$thisItem,bg:o.bg});}
for(i=newItems.length;i--;){$thisItem=newItems[i].item;bg=newItems[i].bg;setTimeout(loadBG,(newItems.length- i)*100,$thisItem,bg);}}
$(document).ready(function(){$ul=$('ul');$more=$('.more');$moreLink=$('.more a');$(this).on('contextmenu selectstart',function(event){event.preventDefault();return false;});$('body').on('copy',function(event){event.preventDefault();return false;});initTwitterShareButton();initMoreButton();initTopButton();loadTweets();var hasSticky=(function(){var el=document.createElement('a');var style=el.style;style.cssText='position: sticky;'
return style.position.indexOf('sticky')!==-1;}());if(!hasSticky){PositionSticky([$more[0]]);}});return Lonely;}());